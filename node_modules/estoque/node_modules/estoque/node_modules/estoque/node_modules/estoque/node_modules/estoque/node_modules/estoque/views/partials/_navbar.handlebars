<!-- Navbar: Barra de navegação superior -->
<nav class="navbar navbar-expand-lg bg-body-tertiary fixed-top" id="nav">
  <!-- Botão de alternância para dispositivos móveis -->
  <button
    class="navbar-toggler"
    type="button"
    data-bs-toggle="collapse"
    data-bs-target="#navbarNav"
    aria-controls="navbarNav"
    aria-expanded="false"
    aria-label="Toggle navigation"
  >
    <!-- Ícone de alternância (três linhas horizontais) -->
    <span class="navbar-toggler-icon"></span>
  </button>

  <!-- Conteúdo da barra de navegação, que será colapsado em dispositivos móveis -->
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav">
      
      <li class="nav-item" style="margin-left: 1rem;"><a class="navbar-brand">Estoque Facil</a></li>
      <p id="retornarP">
         <!-- Link para voltar à página anterior usando JavaScript -->
          <a href="javascript:history.back()" id="retornar">
              <!-- Ícone de seta em SVG -->
              <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="black" class="bi bi-arrow-counterclockwise" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2z"/>
                  <path d="M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466"/>
              </svg>
          </a>
      </p> 
      <!-- Condicional: Verifica se o usuário está autenticado -->
      {{#if user}}
      
        <!-- Itens de navegação visíveis para usuários autenticados -->
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="/admin" id="home">
            Home
          </a>
        </li>
        
      {{else}}
        <!-- Itens de navegação visíveis para usuários não autenticados -->
        {{#unless user}}
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="/admin" id="ini">
              Home
            </a>
          </li>
          
          <li class="nav-item"> 
            <a class="nav-link active" aria-current="page" href="/admin/inicio" id="sobre">
              Sobre
            </a>
          </li>

          
          <!-- Menu suspenso para o Mapa -->
        
        {{/unless}}
      {{/if}}
    </ul>
    
  </div>

  <div id="liData" >
    <p id="data"></p>
  </div>

  <span class="navbar-text" style="margin-right: 1rem">
    <a href="/admin" id="sair">
      <svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="#221f36" class="bi bi-x-square" viewBox="0 0 16 16">
        <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"/>
        <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"/>
      </svg>
    </a>
  </span>
</nav>

<!--script para pegar data e dia atual-->
<script>
  const divData = document.getElementById('liData');
  const dataAtual = new Date();

  const diasSemana = [ 'Domingo', 'Segunda-feira', 'Terça-feira', 'Quarta-feira', 'Quinta-feira', 'Sexta-feira', 'Sábado'
  ];

  let data = document.getElementById('data');

  // Obter o dia da semana e a data formatada
  const diaSemana = diasSemana[dataAtual.getDay()];
  const dia = String(dataAtual.getDate()).padStart(2, '0');
  const mes = String(dataAtual.getMonth() + 1).padStart(2, '0'); // Mês (0-11)
  const ano = dataAtual.getFullYear();

  data.innerText = `${diaSemana}, ${dia}/${mes}/${ano}`;
  divData.appendChild(data)

  console.log(data)
</script>

<!--Script para confirmar o logout-->
<script>
  const sair = document.getElementById('sair');
  sair.addEventListener('click', (event)=> {
    event.preventDefault();

    alert('Tem certeza que deseja sair ?');

    window.location.href = '/admin';
  })
</script>